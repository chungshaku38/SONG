{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"id": "analysis/variantCall",
	"type": "object",
	"definitions" : {
		"fileType": {
			"type": "string",
			"enum": [
				"FASTA",
				"FAI",
				"FASTQ",
				"BAM",
				"BAI",
				"VCF",
				"TBI",
				"IDX",
				"XML",
				"TGZ"
			]
		},
		"md5" : {
			"type": "string",
			"pattern" : "^[a-fA-F0-9]{32}$"
		},
		"single_file" :{
			"type": "object",
			"required": [
				"fileName",
				"fileSize",
				"fileType",
				"fileAccess",
				"fileMd5sum"
			],
			"properties": {
				"fileName": {
					"type": "string",
					"pattern": "^[A-Za-z0-9_\\.\\-\\[\\]\\(\\)]+$"
				},
				"fileSize": {
					"type": "integer",
					"min" : 0
				},
				"fileAccess" : {
					"type" : "string",
					"enum" : [
						"open",
						"controlled"
					]
				},
				"fileType": { "$ref" : "#/definitions/fileType" },
				"fileMd5sum": { "$ref" : "#/definitions/md5" },
				"info" :  { "$ref" : "#/definitions/info" }
			}
		},
		"donorGender": {
			"type": "string",
			"enum": [
				"male",
				"female",
				"unspecified"
			]
		},
		"specimenType": {
			"type": "string",
			"enum": [
				"Normal - solid tissue",
				"Normal - blood derived",
				"Normal - bone marrow",
				"Normal - tissue adjacent to primary",
				"Normal - buccal cell",
				"Normal - EBV immortalized",
				"Normal - lymph node",
				"Normal - other",
				"Primary tumour - solid tissue",
				"Primary tumour - blood derived (peripheral blood)",
				"Primary tumour - blood derived (bone marrow)",
				"Primary tumour - additional new primary",
				"Primary tumour - other",
				"Recurrent tumour - solid tissue",
				"Recurrent tumour - blood derived (peripheral blood)",
				"Recurrent tumour - blood derived (bone marrow)",
				"Recurrent tumour - other",
				"Metastatic tumour - NOS",
				"Metastatic tumour - lymph node",
				"Metastatic tumour - metastasis local to lymph node",
				"Metastatic tumour - metastasis to distant location",
				"Metastatic tumour - additional metastatic",
				"Xenograft - derived from primary tumour",
				"Xenograft - derived from tumour cell line",
				"Cell line - derived from tumour",
				"Primary tumour - lymph node",
				"Metastatic tumour - other",
				"Cell line - derived from xenograft tumour"
			]
		},
		"specimenClass" : {
			"type": "string",
			"enum": [
				"Normal",
				"Tumour",
				"Adjacent normal"
			]
		},
		"sampleTypes" :{
			"type": "string",
			"enum": [
				"DNA",
				"FFPE DNA",
				"Amplified DNA",
				"RNA",
				"Total RNA",
				"FFPE RNA"
			]
		},
		"submitterId" : {
			"type": "string"
		},
		"info" : {
			"type": "object"
		},
		"single_sample": {
			"type": "object",
			"required": [
				"sampleSubmitterId",
				"sampleType"
			],
			"properties": {
				"sampleSubmitterId": { "$ref" : "#/definitions/submitterId" },
				"sampleType": { "$ref" : "#/definitions/sampleTypes" },
				"info": { "$ref" : "#/definitions/info"}
			}
		},
		"single_specimen": {
			"type": "object",
			"required" : [
				"specimenSubmitterId",
				"specimenClass",
				"specimenType"
			],
			"properties": {
				"specimenSubmitterId": { "$ref" : "#/definitions/submitterId" },
				"specimenClass": { "$ref" : "#/definitions/specimenClass" },
				"specimenType": { "$ref" : "#/definitions/specimenType" },
				"info": { "$ref" : "#/definitions/info"}
			}
		},
		"single_donor": {
			"type": "object",
			"required" : [
				"donorSubmitterId",
				"donorGender"
			],
			"properties": {
				"donorSubmitterId": { "$ref" : "#/definitions/submitterId" },
				"donorGender": { "$ref" : "#/definitions/donorGender"},
				"info": { "$ref" : "#/definitions/info"}
			}
		}
	},
	"required": [ "study", "analysisType","experiment","sample","file"],
	"properties": {
		"study" : {
			"type": "string",
			"minLength": 1
		},
		"analysisType": {
			"type": "string",
			"enum": [ "variantCall" ]
		},
		"experiment": {
			"type": "object",
			"required": [
				"matchedNormalSampleSubmitterId",
				"variantCallingTool"
			],
			"properties": {
				"matchedNormalSampleSubmitterId": {
					"type": "string"
				},
				"variantCallingTool": {
					"type": "string"
				}
			}
		},
		"sample": {
			"type": "array",
			"minItems" : 1,
			"items": {
				"type": "object",
				"allOf" : [ {"$ref" : "#/definitions/single_sample" } ],
				"required": [
					"specimen",
					"donor"
				],
				"properties": {
					"specimen": { "$ref" : "#/definitions/single_specimen" },
					"donor": { "$ref" : "#/definitions/single_donor" }
				}
			}
		},
		"file": {
			"type": "array",
			"minItems" : 1,
			"items": { "$ref" : "#/definitions/single_file" }
		},
		"info": { "$ref" : "#/definitions/info"},
		"analysisId": {
			"type": ["string","null"],
			"pattern" : "^[a-zA-Z0-9]{1}[a-zA-Z0-9-_]{1,34}[a-zA-Z0-9]{1}$"
		}
	}
}
